# Claude 3.7 Sonnet 拡張思考ノートブック

このリポジトリには、Claude 3.7 Sonnet の拡張思考機能を効果的に使用する方法を教える包括的なノートブックと資料のセットが含まれています。これらのチュートリアルは Amazon Bedrock の Claude 3.7 Sonnet で使用するように設計されていますが、概念の多くは他の展開方法にも適用できます。

## ワークショップの概要

Claude 3.7 Sonnet は、モデルが複雑な問題を系統的に処理できるようにする画期的な **拡張思考** 機能を導入しています。これらのノートブックは、さまざまなユースケースでこの強力な機能を理解、構成、および活用するためのガイドとなります。

## 前提条件

- Amazon Bedrock にアクセスできる AWS アカウント
- リージョン内の Claude 3.7 Sonnet にアクセスできる
- Python と Jupyter ノートブックの基本的な理解
- LLM プロンプトの概念に精通している

## セットアップ手順

1. このリポジトリをクローンします:
   ```bash
   git clone https://github.com/aws-samples/anthropic-on-aws.git
   cd claude_3_7_extended_thinking
   ```

2. Python 環境をセットアップします:
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   pip install -r requirements.txt
   ```

3. Bedrock アクセス用に AWS 認証情報を設定します:
   ```bash
   aws configure
   ```

4. Jupyter を起動してノートブックにアクセスします:
   ```bash
   jupyter lab
   ```

## ワークショップの内容

ワークショップは、Claude 3.7 の拡張思考機能について段階的に理解を深める 8 つのレッスンで構成されています:

### レッスン 1: Claude 3.7 と拡張思考の紹介
- Claude 3.7 Sonnet の機能の概要
- 拡張思考と、以前のアプローチとの違いを理解する
- Python での Bedrock API の基本設定
- 標準モードと拡張思考モードを比較する簡単な例

### レッスン 2: 拡張思考をいつ、どのように使用するか
- タスクの複雑さの分類フレームワーク
- 拡張思考を使用するタイミングの決定木
- 適切な使用例と不要な場合の例
- さまざまなタスク タイプでのパフォーマンス ベンチマーク

### レッスン 3: 推論予算の割り当ての最適化
- 「コストとパフォーマンスの最適化」アプローチの構築
- 動的な推論予算の割り当ての実装
- 予算、時間、品質のトレードオフの視覚化
- 適応型のための再利用可能な Python クラスの作成推論

### レッスン 4: 拡張思考のための効果的なプロンプト手法
- 一般的な指示パターンと段階的な指示パターン
- 拡張思考による N ショット プロンプトの実装
- 推論の深さと範囲を制御する手法
- さまざまなユース ケース用のプロンプト テンプレート ライブラリの作成

### レッスン 5: 拡張思考によるツール使用の統合
- 拡張思考 + ツール使用パターンの理解
- シーケンシャル推論の実装とツール呼び出し
- 推論とツールを組み合わせたマルチステップ ワークフローの構築
- エラー処理と回復戦略

### レッスン 6: 包括的なコンテンツと長い形式の出力の生成
- より長く詳細な応答を生成する手法
- 拡張思考におけるアウトラインと構造化計画の使用
- 詳細なデータ セットと表の生成
- 長い出力の管理と検証

### レッスン 7: Claude 3.7 による複雑な問題解決
- 制約最適化問題への取り組み
- 複数の分析フレームワークのシーケンシャルな適用
- STEM 問題 (数学、物理学、コンピューター サイエンス)
- さまざまなドメインで複雑性を処理するためのアプローチの実装

### レッスン 8: ワークロードを Claude 3.7 に移行する
- 以前の Claude モデルからの移行
- Claude 3.7 用に既存のプロンプトをリファクタリングする
- プロンプトを簡素化するためのベスト プラクティス
- 拡張思考を使用する際の思考の連鎖ガイダンスの削除

## ユーティリティ モジュール

リポジトリには、次のヘルパー関数を提供する `claude_utils.py` モジュールが含まれています。
- Bedrock クライアントの作成と管理
- 拡張思考による Claude の呼び出し
- 応答の表示と分析
- ツールの操作
- コンテンツの検証と分析

## 主要な概念

### 拡張思考のメンタル モデル

拡張思考は、難しい数学の問題を解くときにメモ用紙を使用するのと同じように、Claude に複雑な問題を段階的に解くための「メモ帳」を与えるものと考えることができます。すぐに応答しようとする代わりに、Claude は次のことができます。

1. まず問題を系統的に考える
2. さまざまなアプローチと可能性を模索する
3. 中間結果を検証する
4. 十分に根拠のある最終回答に到達する

### 推論予算

「推論予算」は、Claude の拡張思考プロセスに割り当てられるトークンの量です。
- 最小: 1,024 トークン
- 複雑なタスクに推奨: 4,096～8,192 トークン
- 最大: 最大 128,000 トークン (プレビュー)

推論予算は、CPU 時間を計算タスクに割り当てるようなものと考えてください。より複雑な問題では、より大きな予算が役立ちますが、ある時点を超えると収穫逓減が起こります。

## 貢献

これらの資料を改善するための貢献を歓迎します。提案、修正、または機能強化がある場合は、問題またはプル リクエストを送信してください。

## ライセンス

このプロジェクトは MIT ライセンスの下でライセンスされています。詳細については、LICENSE ファイルを参照してください。

## 謝辞

- Claude 3.7 Sonnet を開発してくれた Anthropic チーム
- Bedrock を通じて Claude を利用できるようにしてくれた AWS Bedrock チーム
- このワークショップ資料に貢献してくれたすべての方々

---

Claude 3.7 の拡張思考機能で楽しい探索をお楽しみください。